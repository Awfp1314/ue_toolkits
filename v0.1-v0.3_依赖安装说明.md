# AI Deep Integration (v0.1-v0.3) 依赖安装说明

## ✅ 已完成安装

### Python 依赖包（已安装）
```bash
✓ sentence-transformers 5.1.2   # 语义模型加载
✓ chromadb 1.3.0                # 向量数据库
✓ PyGithub 2.8.1                # GitHub代码搜索
```

---

## ⏳ 语义模型下载

### 模型信息
- **模型名称**: `BAAI/bge-small-zh-v1.5`
- **模型大小**: ~100MB
- **下载时机**: 首次使用时自动下载
- **存储位置**: `~/.cache/huggingface/`

### 下载方式

#### 方式1：自动下载（需访问 HuggingFace）
程序首次使用语义分析功能时会自动下载。

#### 方式2：使用国内镜像（推荐）
**临时设置**（当前会话）：
```powershell
# PowerShell
$env:HF_ENDPOINT = "https://hf-mirror.com"
python main.py
```

**永久设置**（添加到系统环境变量）：
1. 右键 **此电脑** → **属性** → **高级系统设置**
2. 点击 **环境变量**
3. 在 **用户变量** 中新建：
   - 变量名：`HF_ENDPOINT`
   - 变量值：`https://hf-mirror.com`
4. 点击 **确定**，重启命令行

---

## 🎯 启动程序

```bash
cd "C:\Users\wang\Desktop\ue_toolkits - ai"
python main.py
```

---

## 🔍 验证新功能是否启用

### 查看启动日志
程序启动时会输出以下信息：

#### ✅ 如果依赖已安装且模型已下载：
```
[INFO] IntentEngine: 语义模型加载成功 (BAAI/bge-small-zh-v1.5)
[INFO] RuntimeContextManager: 运行态上下文已初始化
[INFO] LocalDocIndex: 本地文档索引已创建
[INFO] RemoteRetriever: 远程代码检索已初始化
[INFO] ToolsRegistry: 工具注册表已初始化 (6个工具)
[INFO] ActionEngine: 工具调用引擎已启动
```

#### ⏳ 如果模型未下载：
```
[WARNING] v0.1 功能不可用（缺少依赖）: ...
[INFO] 程序使用基础模式运行（规则匹配fallback）
```

### AI助手测试
1. 打开 **AI助手** 模块
2. 输入测试查询：
   ```
   查找所有材质资产
   ```

3. 查看响应：
   - **有语义模型**：会显示详细的意图分析和上下文信息
   - **无语义模型**：使用规则匹配，功能略简化

---

## 📊 功能对比

| 功能                | 基础模式（fallback） | 完整模式（v0.1-v0.3） |
|-------------------|-----------------|------------------|
| 程序启动            | ✅ 正常          | ✅ 正常            |
| AI对话             | ✅ 可用          | ✅ 可用            |
| 意图识别            | 🔹 规则匹配      | ✅ 语义理解         |
| 运行态上下文        | ❌ 不可用        | ✅ 自动追踪         |
| 本地文档检索        | ❌ 不可用        | ✅ 向量搜索         |
| GitHub代码搜索     | ❌ 不可用        | ✅ API搜索         |
| 工具调用           | ❌ 不可用        | ✅ 自动执行         |
| 受控操作确认        | ❌ 不可用        | ✅ 审计日志         |

---

## 🛠️ 故障排除

### 问题1：模型下载失败
**症状**：
```
OSError: We couldn't connect to 'https://huggingface.co'
```

**解决方案**：
1. 使用国内镜像（见上文"方式2"）
2. 检查网络连接或使用VPN
3. 如急需使用，可先使用基础模式

### 问题2：程序启动缓慢
**原因**：首次下载模型（~100MB）

**解决方案**：
- 耐心等待首次下载完成
- 下次启动会使用缓存，速度正常

### 问题3：依赖安装失败
**症状**：
```
ERROR: Could not find a version that satisfies the requirement...
```

**解决方案**：
```bash
# 使用阿里云镜像
pip install sentence-transformers chromadb PyGithub \
    -i https://mirrors.aliyun.com/pypi/simple/ \
    --trusted-host mirrors.aliyun.com
```

---

## 📞 技术支持

如遇到其他问题，请查看：
- `AI_Deep_Integration_完成总结.md` - 完整实现文档
- `v0.1_验收文档.md` - v0.1 功能验收标准
- `v0.2_验收文档.md` - v0.2 功能验收标准
- `v0.3_验收文档.md` - v0.3 功能验收标准

---

**最后更新**: 2025-11-04
**适用版本**: v0.1 + v0.2 + v0.3

